# nvidia-settings: X configuration file generated by nvidia-settings
# nvidia-settings:  version 525.78.01

Section "ServerLayout"
    Identifier     "Layout0"
    InputDevice    "Keyboard0" "CoreKeyboard"
    Option         "Xinerama" "0"
EndSection

Section "Files"
EndSection

Section "Module"
    Load           "dbe"
    Load           "extmod"
    Load           "type1"
    Load           "freetype"
    Load           "glx"
EndSection

#  # HorizSync source: edid, VertRefresh source: edid
Section "ServerFlags"
    # Don't use these options at all! Use xidlehook to handle standby
    # ~/dotfiles/scripts/xidlehook_neog9.sh
    Option "StandbyTime" "0" # same as OffTime?! Verify.
    Option "OffTime" "0" # doesnt communicate "off" to xrandr. 1st "8" shuts down the display
    Option "SuspendTime" "0" # doesn't turn off at all. Tried once only with "3"
    Option "BlankTime" "0"
EndSection

# OutputClass replaces Screen+Device. It's more dynamic and works for both NVIDIA+AMD initramfs configs!
# This is necessary for my VFIO setup, which makes it necessary for those two configs to be compatible.
Section "OutputClass"
    Identifier "AMD"
    Driver "amdgpu"
    Option "AccelMethod" "glamor"
    Option "TearFree" "true"
    Option "DRI" "3"
    Option "AllowEmptyInitialConfiguration"
EndSection

Section "OutputClass"
    Identifier     "NVIDIA"
    MatchDriver    "nvidia-drm"
    Driver         "nvidia"
    Option         "RegistryDwords"  "RMUseSwI2c=0x01; RMI2cSpeed=100"
    Option         "AllowEmptyInitialConfiguration"
    Option         "PrimaryGPU" "yes"
EndSection

